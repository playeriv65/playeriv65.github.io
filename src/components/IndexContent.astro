---
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<main>
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content mx-auto text-center">
            <h1 class="hero-title animate-fade-in-up">{t("hero.title")}</h1>
            <p class="hero-subtitle animate-fade-in-up delay-100">
                {t("hero.subtitle")}
            </p>
            <div class="hero-cta animate-fade-in-up delay-200">
                <a href="#projects" class="btn btn-primary"
                    >{t("hero.btn.featured")}</a
                >
                <a
                    href="/resume.pdf"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="btn btn-secondary">{t("hero.btn.resume")}</a
                >
            </div>
        </div>

        <!-- Abstract visual element (glow) -->
        <div class="glow-container animate-fade-in-up delay-300">
            <div class="glow"></div>
        </div>
    </section>

    <!-- Introduction Section -->
    <section id="about" class="intro-section reveal-on-scroll">
        <div
            class="content-wrapper mx-auto text-center border-bottom-glass pb-120"
        >
            <h2 class="section-headline">{t("intro.headline")}</h2>
            <p class="intro-body text-muted">
                {t("intro.body.1")}<strong>{t("intro.body.university")}</strong
                >{t("intro.body.2")}<br /><br />
                {t("intro.body.3")}<strong>{t("intro.body.systems")}</strong>{
                    t("intro.body.4")
                }<strong>{t("intro.body.ai")}</strong>{t("intro.body.5")}
            </p>
        </div>
    </section>

    <!-- Projects Grid -->
    <section id="projects" class="projects-section">
        <div class="content-wrapper mx-auto">
            <div class="section-header text-center reveal-on-scroll">
                <h2 class="section-headline">{t("projects.headline")}</h2>
                <p class="section-subheadline text-muted">
                    {t("projects.subheadline")}
                </p>
            </div>

            <div class="bento-grid">
                <!-- Project 1 (Large) -->
                <div class="bento-card bento-large reveal-on-scroll">
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">{t("project.1.title")}</h3>
                            <p class="card-tech">{t("project.1.tech")}</p>
                        </div>
                        <p class="card-desc">
                            {t("project.1.desc")}
                        </p>
                        <a
                            href="https://github.com/playeriv65/EasyLocomo"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="card-link">{t("project.1.link")}</a
                        >
                    </div>
                </div>

                <!-- Project 2 (Small) -->
                <div class="bento-card reveal-on-scroll delay-100">
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">{t("project.2.title")}</h3>
                            <p class="card-tech">{t("project.2.tech")}</p>
                        </div>
                        <p class="card-desc">
                            {t("project.2.desc")}
                        </p>
                        <a
                            href="https://github.com/playeriv65/todo"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="card-link">{t("project.2.link")}</a
                        >
                    </div>
                </div>

                <!-- Project 3 (Small) -->
                <div class="bento-card reveal-on-scroll delay-200">
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">{t("project.3.title")}</h3>
                            <p class="card-tech">{t("project.3.tech")}</p>
                        </div>
                        <p class="card-desc">
                            {t("project.3.desc")}
                        </p>
                        <a
                            href="https://github.com/playeriv65/ACG--Auto-Chronicle-Gaokao"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="card-link">{t("project.3.link")}</a
                        >
                    </div>
                </div>

                <!-- Project 4 (Large) -->
                <div class="bento-card bento-large reveal-on-scroll delay-100">
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">{t("project.4.title")}</h3>
                            <p class="card-tech">{t("project.4.tech")}</p>
                        </div>
                        <p class="card-desc">
                            {t("project.4.desc")}
                        </p>
                        <a
                            href="https://github.com/playeriv65/Monitor"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="card-link">{t("project.4.link")}</a
                        >
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

<style>
    main {
        width: 100%;
        overflow-x: hidden;
    }

    .content-wrapper {
        max-width: 980px;
        padding: 0 22px;
    }

    .pb-120 {
        padding-bottom: 120px;
    }

    .border-bottom-glass {
        border-bottom: 1px solid var(--glass-border);
    }

    /* Hero Section */
    .hero-section {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding-top: 44px; /* Offset for header */
        position: relative;
    }

    .hero-content {
        z-index: 10;
        max-width: 800px;
        padding: 0 22px;
    }

    .hero-title {
        font-size: clamp(56px, 8vw, 96px);
        line-height: 1.05;
        font-weight: 700;
        letter-spacing: -0.015em;
        margin-bottom: 16px;
    }

    .hero-subtitle {
        font-size: clamp(24px, 4vw, 32px);
        line-height: 1.1;
        font-weight: 500;
        color: var(--color-text-muted);
        margin-bottom: 24px;
    }

    .hero-cta {
        display: flex;
        gap: 16px;
        justify-content: center;
        margin-top: 32px;
    }

    /* Abstract Glow */
    .glow-container {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 50vh;
        display: flex;
        justify-content: center;
        align-items: flex-end;
        z-index: 0;
        pointer-events: none;
    }

    .glow {
        width: 100vw;
        max-width: 900px;
        height: 400px;
        background: radial-gradient(
            50% 50% at 50% 50%,
            rgba(41, 151, 255, 0.15) 0%,
            rgba(41, 151, 255, 0) 100%
        );
        filter: blur(40px);
        margin-bottom: -50px; /* Let it sit just right at the horizon */
    }

    /* Typography Sections */
    .section-headline {
        font-size: clamp(40px, 6vw, 56px);
        line-height: 1.07143;
        font-weight: 600;
        letter-spacing: -0.005em;
        margin-bottom: 20px;
    }

    .section-subheadline {
        font-size: 24px;
        line-height: 1.16667;
        font-weight: 400;
        color: var(--color-text-muted);
        letter-spacing: 0.009em;
        margin-bottom: 60px;
    }

    .text-muted {
        color: var(--color-text-muted);
    }

    /* Intro */
    .intro-section {
        padding: 120px 0 0 0;
    }

    .intro-body {
        font-size: clamp(20px, 3vw, 28px);
        line-height: 1.4;
        font-weight: 400;
        max-width: 800px;
        margin: 0 auto;
    }

    .intro-body strong {
        font-weight: 600;
        color: var(--color-text);
    }

    /* Projects / Bento Grid */
    .projects-section {
        padding: 80px 0;
    }

    .bento-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 24px;
    }

    .bento-card {
        background-color: var(--card-bg);
        border-radius: 28px; /* Fallback for unsupported browsers */

        /* Apple Squircle Continuous Curvature - Cross-Browser Masking */
        -webkit-mask-box-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='202' height='202'%3E%3Cpath d='M0,100 C0,22.4 22.4,0 100,0 L102,0 C179.6,0 202,22.4 202,100 L202,102 C202,179.6 179.6,202 102,202 L100,202 C22.4,202 0,179.6 0,102 Z' fill='black'/%3E%3C/svg%3E")
            100 stretch;
        -webkit-mask-box-image-width: 28px;
        mask-border: url("data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='202' height='202'%3E%3Cpath d='M0,100 C0,22.4 22.4,0 100,0 L102,0 C179.6,0 202,22.4 202,100 L202,102 C202,179.6 179.6,202 102,202 L100,202 C22.4,202 0,179.6 0,102 Z' fill='black'/%3E%3C/svg%3E")
            100 fill stretch;
        mask-border-width: 28px;

        height: 450px;
        padding: 40px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        position: relative;
        overflow: hidden;
        transition:
            transform 0.3s var(--ease-apple),
            background-color 0.3s ease;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05);
        border: none;
    }

    .bento-card:hover {
        transform: scale(1.02);
        background-color: rgba(255, 255, 255, 0.05);
    }

    .bento-large {
        grid-column: span 2;
        height: 400px;
    }

    .card-header {
        margin-bottom: 16px;
    }

    .card-title {
        font-size: 28px;
        font-weight: 600;
        margin-bottom: 6px;
        letter-spacing: -0.01em;
    }

    .card-tech {
        font-size: 14px;
        font-weight: 600;
        color: var(--color-primary);
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .card-desc {
        font-size: 18px;
        line-height: 1.5;
        color: var(--color-text-muted);
        margin-bottom: 24px;
    }

    .card-link {
        margin-top: auto;
        display: inline-flex;
        align-items: center;
        font-weight: 600;
        color: var(--color-text);
        transition: color 0.2s ease;
    }

    .card-link:hover {
        color: var(--color-primary);
    }

    @media (max-width: 768px) {
        .bento-grid {
            grid-template-columns: 1fr;
        }

        .bento-large {
            grid-column: span 1;
            height: auto;
            min-height: 400px;
        }

        .bento-card {
            height: auto;
            min-height: 400px;
        }

        .hero-cta {
            flex-direction: column;
            align-items: center;
        }

        .btn {
            width: 100%;
            max-width: 300px;
        }
    }
</style>
